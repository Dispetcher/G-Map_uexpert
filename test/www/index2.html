<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>Complex icons</title>
    <style>
      html, body {
        margin: 0;
        padding: 0;
      }
      #map {
        height: 800px;
        width:70vw;
      }
      </style>
  </head>
  <body>
    <div id="map"></div>
    <script>
/* Определяем центр карты и зум, определяем и располагаем маркеры */
      function initMap() {
        var map = new google.maps.Map(document.getElementById('map'), {
          center:{lat:59.940,lng:30.330},zoom:11
        });
        setMarkers(map);
      };
   /* Массив данных */      
/* Задаем лэйбл, расположения маркерам и z индекс(очередность расположения)*/
      var constrs = [
      ['Первая', 59.85782506, 30.39410196, 1], 
      ['Вторая', 59.84012022, 30.41070879, 2],
      ['Третья', 59.82332243, 30.42948693, 3],
      ];

/*Запускаем функцию определения маркеров*/
      function setMarkers(map) {
 
        var image = {
          url: 'https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png',
          // This marker is 20 pixels wide by 32 pixels high.
          size: new google.maps.Size(20, 32),
          // The origin for this image is (0, 0).
          origin: new google.maps.Point(0, 0),
          // The anchor for this image is the base of the flagpole at (0, 32).
          anchor: new google.maps.Point(0, 32)
        };

/* Размер кликабельного поля на иконке*/
        var shape = {
          coords: [1, 1, 1, 20, 18, 20, 18, 1],
          type: 'poly'
        };

/* Переменная с блоком текста по одной иконке*/        
        var Third = 
        '<div id="content">'+
            '<h1 id="firstHeading" class="firstHeading">Uluru</h1>'+
            '<div id="bodyContent">'+
            '<p><b>Uluru</b>, also referred to as <b>Ayers Rock</b>, is a large ' +
            'sandstone rock formation in the southern part of the Northern Territory, central Australia.</p>'+
            '</div>'+
            '</div>';
       var Sec = 
        '<div id="content">'+
            '<h1 id="firstHeading" class="firstHeading">22222</h1>'+
            '<div id="bodyContent">'+
            '<p><b>Uluru</b>, also referred to as <b>Ayers Rock</b>, is a large ' +
            'sandstone rock formation in the southern part of the Northern Territory, central Australia.</p>'+
            '</div>'+
            '</div>';


/*Задаем переменную для всплывающего окна*/
        var Secwin = new google.maps.InfoWindow({
          content: Sec
        });
        var Thirdwin = new google.maps.InfoWindow({
          content: Third
        });

/*Перебираем все маркеры, из массива данных выше передаем параметры по титулу, долготе и иконке*/
        for (var i = 0; i < constrs.length; i++) {
          var constr = constrs[i];
          var marker = new google.maps.Marker({
            position: {lat: constr[1], lng: constr[2]},
            map: map,
            icon: image,
            shape: shape,
            title: constr[0],
            zIndex: constr[3],
          });
        }

        marker.addListener('click', function() {
          if(marker.title=='Третья'){
          Thirdwin.open(map, marker);
          }else if(marker.title=='Вторая'){
          Secwin.open(map, marker); 
          }
        });





      }


    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDRTPdt0Qs9GVAsnrKy-pL0rjV1p8S5D0E&callback=initMap">
    </script>
  </body>
</html>