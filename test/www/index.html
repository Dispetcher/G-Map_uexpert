<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>Complex icons</title>
    <style>
      html, body {
        margin: 0;
        padding: 0;
      }
      #map {
        height: 800px;
        width:70vw;
      }
      #floating-panel {
        position: absolute;
        top: 10px;
        left: 25%;
        z-index: 5;
        background-color: #fff;
        padding: 5px;
        border: 1px solid #999;
        text-align: center;
        font-family: 'Times New Roman';
        line-height: 30px;
        padding-left: 10px;
      }
      #floating-panel {
        margin-left: -52px;

      </style>
  </head>
  <body>
    <div id="map"></div>
      <div id="floating-panel">
      <button id="drop" onclick="dropAll()">Drop Markers</button>
      <button id="clear" onclick="removeLine()">Remove</button>
    </div>

    <script>
var marker;
var markers = [];
var map;
var linePath;
var polyLine = [];
var linepatharr= [];

var redline = '#d52d2d';
var blueline= '2a0acb';
var greenline= '#034f0d';
var orangeline= '#ff6500';
var violetline= '#60008a';
var brownline= '#5b4037';

/*Иконки станций построенных*/
var GreenIcon = {url: 'Imgs/Green.png'};
var OrangeIcon = {url: 'Imgs/Orange.png'};
var VioletIcon = {url: 'Imgs/Violet.png'};
var BrownIcon = {url: 'Imgs/Brown.png'};

/*Иконки станций в стройке*/
var cGreenIcon = {url: 'Imgs/cGreen.png'};
var cOrangeIcon = {url: 'Imgs/cOrange.png'};
var cVioletIcon = {url: 'Imgs/cViolet.png'};
var cBrownIcon = {url: 'Imgs/cBrown.png'};

/*Иконка станций в проекте*/
var pGreenIcon = {url: 'Imgs/pGreen.png'};
var pOrangeIcon= {url: 'Imgs/pOrange.png'};
var pVioletIcon= {url: 'Imgs/pViolet.png'};
var pBrownIcon= {url: 'Imgs/pBrown.png'};

/*Описание станций в строительстве*/
var containerConstr = [
['<div class="content__body"><p><b>Время постройки</b> - апрель 2018 года, <b>Линия</b> - Невско-Василеостровская (3 линия «Зеленая»)</p>'+
'<p><b>Адрес</b> - Ул. Савушкина, (юго-западнее пересечения ул. Савушкина и Туристской ул.)</p>'+
'</div>'],
['<div class="content__body"><p><b>Время постройки</b> - март 2018 года, <b>Линия</b> - Невско-Василеостровская (3 линия «Зеленая»)</p>'+
'<p><b>Адрес</b> - Крестовский остров, западнее нового стадиона «Зенит-Арена»</p>'+
'</div>'],
['<div class="content__body"><p><b>Время постройки</b> - ноябрь 2019 года, <b>Линия</b> - Правобережная (4 линия «Оранжевая»)</p>'+
'<p><b>Адрес</b> - Большой пр. В.О. (юго-западнее пересечения Большого пр. и Косой линии)</p>'+
'</div>'],
['<div class="content__body"><p>Станция будет сдана без выхода на поверхность</p>'+
'<p><b>Время постройки</b> - ноябрь 2019 года, <b>Линия</b> - Правобережная (4 линия «Оранжевая»)</p>'+
'<p><b>Адрес</b> - Ул. Декабристов (южнее пересечения ул. Декабристов и ул. Глинки</p></div>'],
['<div class="content__body"><p><b>Время постройки</b> - июнь 2022 года, <b>Линия</b> - Красносельско-Калининская (6 линия «Кориченвая»)</p>'+
'<p><b>Адрес</b> - Ул. Васи Алексеева (западнее дома №12 корп.1 по ул. Маршала Говорова)</p>'+
'</div>'],
['<div class="content__body"><p><b>Время постройки</b> - июнь 2022 года, <b>Линия</b> - Красносельско-Калининская (6 линия «Кориченвая»)</p>'+
'<p><b>Адрес</b> - Ул. Маршала Казакова (Юго-западнее пересечения ул. Маршала Казакова и пр.Маршала Жукова)</p>'+
'</div>'],
['<div class="content__body"><p><b>Время постройки</b> - 2018 год, <b>Линия</b> - Фрунзенско-Приморская (5 линия «фиолетовая»)</p>'+
'<p><b>Адрес</b> - Вестибюль 1: Бухарестская ул., (южнее пересечения пр. Славы с Бухарестской ул.) Вестибюль 2: Бухарестская ул. (юго-восточнее пересечения Бухарестской ул. с Альпийским пер.)</p>'+
'</div>'],
['<div class="content__body"><p><b>Время постройки</b> - 2018 год, <b>Линия</b> - Фрунзенско-Приморская (5 линия «фиолетовая»)</p>'+
'<p><b>Адрес</b> - Бухарестская ул. (юго-восточнее пересечения Дунайского пр. и Бухарестской ул.)</p>'+
'</div>'],
['<div class="content__body"><p><b>Время постройки</b> - 2018 год, <b>Линия</b> - Фрунзенско-Приморская (5 линия «фиолетовая»)</p>'+
'<p><b>Адрес</b> - Пос. Шушары, Автозаводская ул., уч. №1 (западнее пересечения с Софийской ул.)</p>'+
'</div>']
];

/*Описание станций в проектировании*/
var containerProj = [
['<div class="content__body"><p><b>Время постройки</b> - до 2025 года, <b>Линия</b> - Невско-Василеостровская (3 линия «Зеленая»)</p>'+
'<p><b>Адрес</b> - Для размещения вестибюля этой станции рассматривается несколько вариантов: пересечение Планерной улицы с Шуваловским проспектом, пересечение Шуваловского проспекта с проспектом Авиаконструкторов, а также на самой Планерной улице вблизи планировавшегося нового зоопарка в Юнтолово</p>'+
'</div>'],
['<div class="content__body"><p><b>Время постройки</b> - до 2025 года, <b>Линия</b> - Невско-Василеостровская (3 линия «Зеленая»)</p>'+
'<p><b>Адрес</b> - южнее пересечения Туристской улицы и улицы Оптиков</p>'+
'</div>'],
['<div class="content__body"><p><b>Время постройки</b> - до 2025 года, <b>Линия</b> - Правобережная (4 линия «Оранжевая»)</p>'+
'<p><b>Адрес</b> - Крестовский остров, западнее нового стадиона «Зенит-Арена»</p>'+
'</div>'],
['<div class="content__body"><p><b>Время постройки</b> - до 2025 года, <b>Линия</b> - Правобережная (4 линия «Оранжевая»)</p>'+
'<p><b>Адрес</b> - угол Морской набережной и Капитанской ул.</p>'+
'</div>'],
['<div class="content__body"><p><b>Время постройки</b> - до 2025 года, <b>Линия</b> - Правобережная (4 линия «Оранжевая»</p>'+
'<p><b>Адрес</b> - выходы на Шкиперском протоке, южнее пересечения с Галерным проездом и западнее пересечения с Наличной ул</p>'+
'</div>'],
['<div class="content__body"><p><b>Время постройки</b> - до 2025 года, <b>Линия</b> - Фрунзенско-Приморская (5 линия «фиолетовая»)</p>'+
'<p><b>Адрес</b> - на пересечении Шуваловского пр. с пр. Авиаконструкторов</p>'+
'</div>'],
['<div class="content__body"><p><b>Время постройки</b> - до 2025 года, <b>Линия</b> - Красносельско-Калининская (6 линия «Кориченвая»)</p>'+
'<p><b>Адрес</b> - юго-восточнее дома 42 на наб. Обводного канала</p>'+
'</div>'],
['<div class="content__body"><p><b>Время постройки</b> - до 2025 года, <b>Линия</b> - Красносельско-Калининская (6 линия «Кориченвая»)</p>'+
'<p><b>Адрес</b> - вестибюль № 1 Киевская ул. (юго-западнее пересечения с Черниговской ул.) вестибюль № 2 Лиговский пр. (севернее дома № 236, литера Б)</p>'+
'</div>'],
['<div class="content__body"><p><b>Время постройки</b> - до 2025 года, <b>Линия</b> - Красносельско-Калининская (6 линия «Кориченвая»)</p>'+
'<p><b>Адрес</b> - Ташкентская ул. (северо-западнее дома № 103, корп.6, литера А, по Московскому пр.)</p>'+
'</div>'],
['<div class="content__body"><p><b>Время постройки</b> - до 2025 года, <b>Линия</b> - Красносельско-Калининская (6 линия «Кориченвая»)</p>'+
'<p><b>Адрес</b> - первый вестибюль (подземный) будет расположен на северо-западной стороне Т-образного перекрестка Благодатной улицы и Новоизмайловского проспекта с выходами из подземного перехода во все стороны перекрёстка. Второй расположится на западной стороне Митрофаньевского шоссе, недалеко от ЗСД</p>'+
'</div>']
];


function initMap() {
    var infowindow = new google.maps.InfoWindow();
    map = new google.maps.Map(document.getElementById('map'), {
    zoom: 11,
    center: {lat:59.940,lng:30.330},
    });

    dropAll(infowindow);
}

/*Блок строящихся станций*/
var l3c = [
['Станция метро «Беговая»', {lat: 59.987998, lng: 30.202578}, containerProj[0], cOrangeIcon, orangeline, 0.4, 3],
['Станция метро «Новокрестовская 1»', {lat: 59.972948, lng: 30.211208}, containerProj[1], cOrangeIcon, orangeline, 0, 0],
['Станция метро «Приморская»', {lat: 59.948459, lng: 30.234463}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Василеостровская»', {lat: 59.942669, lng: 30.278136}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Гостиный Двор»', {lat: 59.934121, lng: 30.333144}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Маяковская»', {lat: 59.931415, lng: 30.354987}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Площадь Ал. Невского»', {lat: 59.934121, lng: 30.333144}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Елизаровская»', {lat: 59.896690, lng: 30.423680}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Ломоносовская»', {lat: 59.877376, lng: 30.441897}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Пролетарская»', {lat: 59.865166, lng: 30.470110}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Обухово»', {lat: 59.848686, lng: 30.457620}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Рыбацкое»', {lat: 59.830849, lng: 30.500272}, containerProj[1], cVioletIcon, violetline, 1.0, 3]
];

var l4c = [
['Станция метро «Большой проспект»', {lat: 59.926641, lng: 30.297492}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Театральная»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Спасская»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Достоевская»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Лиговский проспект»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Площадь Ал. Невского»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Новочеркасская»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Ладожская»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Проспект Большевиков»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Улица Дыбенко»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3]
];

var l5c = [
['Станция метро «Проспект Славы»', {lat: 59.823, lng: 30.429}, containerProj[0], cOrangeIcon, orangeline, 0.4, 3],
['Станция метро «Дунайская»', {lat: 59.840, lng: 30.410}, containerProj[1], cOrangeIcon, orangeline, 0, 0],
['Станция метро «Южная»', {lat: 59.926641, lng: 30.297492}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Комендантский проспект»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Старая Деревня»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Крестовский остров»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Чкаловская»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Спортивная»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Адмиралтейская»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Садовая»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Звенигородская»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Обводный канал»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Волковская»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Бухарестская»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Международная»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3]
];

var l6c = [
['Станция метро «Путиловская»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Юго-западная»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3]
];

/*Блок проектируемых станций*/
var l3p = [
['Станция метро «Планерная»', {lat: 59.823, lng: 30.429}, containerProj[0], cOrangeIcon, orangeline, 0.4, 3],
['Станция метро «Туристская»', {lat: 59.840, lng: 30.410}, containerProj[1], cOrangeIcon, orangeline, 0, 0],
['Станция метро «Приморская»', {lat: 59.926641, lng: 30.297492}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Василеостровская»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Гостиный Двор»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Маяковская»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Площадь Ал. Невского»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Елизаровская»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Ломоносовская»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Пролетарская»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Обухово»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Рыбацкое»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3]
];

var l4p = [
['Станция метро «Новокрестовская 2»', {lat: 59.926641, lng: 30.297492}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Морской Фасад»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Гавань»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Спасская»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Достоевская»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Лиговский проспект»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Площадь Ал. Невского»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Новочеркасская»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Ладожская»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Проспект Большевиков»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Улица Дыбенко»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3]
];

var l5p = [
['Станция метро «Шуваловский проспект»', {lat: 59.926641, lng: 30.297492}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Комендантский проспект»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Старая Деревня»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Крестовский остров»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Чкаловская»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Спортивная»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Адмиралтейская»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Садовая»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Звенигородская»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Обводный канал»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Волковская»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Бухарестская»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Международная»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3]
];

var l6p = [
['Станция метро «Каретная»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Боровая»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Заставская»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Броневая»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3]
];

/*Блок всех станций*/
/*Блок станций 3 линии (зеленый)*/
var l3st= [
['Станция метро «Планерная»', {lat: 59.823, lng: 30.429}, containerProj[0], cOrangeIcon, orangeline, 0.4, 3],
['Станция метро «Туристская»', {lat: 59.840, lng: 30.410}, containerProj[1], cOrangeIcon, orangeline, 0, 0],
['Станция метро «Беговая»', {lat: 59.823, lng: 30.429}, containerProj[0], cOrangeIcon, orangeline, 0.4, 3],
['Станция метро «Новокрестовская 1»', {lat: 59.840, lng: 30.410}, containerProj[1], cOrangeIcon, orangeline, 0, 0],
['Станция метро «Приморская»', {lat: 59.926641, lng: 30.297492}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Василеостровская»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Гостиный Двор»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Маяковская»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Площадь Ал. Невского»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Елизаровская»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Ломоносовская»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Пролетарская»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Обухово»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Рыбацкое»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3]
];

/*Блок станций 4 линии (оранжевый)*/
var l4st= [
['Станция метро «Новокрестовская 2»', {lat: 59.926641, lng: 30.297492}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Морской Фасад»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Гавань»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Большой проспект»', {lat: 59.926641, lng: 30.297492}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Театральная»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Спасская»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Достоевская»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Лиговский проспект»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Площадь Ал. Невского»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Новочеркасская»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Ладожская»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Проспект Большевиков»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3],
['Станция метро «Улица Дыбенко»', {lat: 59.973, lng: 30.211}, containerProj[1], cVioletIcon, violetline, 1.0, 3]
];

/*Блок станций 5 линии (фиолетовый)*/
var l5st= [];

/*Блок станций 6 линии (коричневый)*/
var l6st= [];


/*Функция опускающая маркеры и рисующая линии при инициализации карты*/
function dropAll(infowindow){
 // dropConStation(infowindow);
 /* dropProjStation(infowindow);
 dropl3st();
  dropl4st();
  dropl5st();
  dropl6st();*/
 dropl3c(infowindow);
}

/*Опускаем станции и рисуем линии в стройке*/
function dropConStation(infowindow) {
  clearMarkers();
  removeLine();
    for (var i = 0; i < constrs.length; i++) {
      if (i != constrs.length-1){
      var constr = constrs[i];
      var constrN = constrs[i+1];
      var linepatharr = [constr[1],constrN[1]]; 

      addMarkerWithTimeout(constr[0], constr[1], constr[2], constr[3], i * 100, infowindow);
      addLine(linepatharr, constr[4], constr[5], constr[6]);
      };

      var constr = constrs[i];
      addMarkerWithTimeout(constr[0], constr[1], constr[2], constr[3], i * 100, infowindow);
    }
}
/*Опускаем станции и рисуем линии в проекте*/
function dropProjStation(infowindow) {
  clearMarkers();
    for (var i = 0; i < projects.length; i++) {
      if (i != projects.length-1){
      var project = projects[i];
      var projectN = projects[i];
      var linepatharr = [project[1], projectN[1]];

      addMarkerWithTimeout(project[0], project[1], project[2], i * 100);
      addLine(linepatharr, project[3], project[4], project[5]);
    };

      var project = projects[i];
      addMarkerWithTimeout(project[0], project[1], project[2], i * 100);
    }
}
/*Опускаем станции и рисуем линии на 3 линии*/
function dropl3st() {
    for (var i = 0; i < l3st.length; i++) {
      if (i != l3st.length-1){
      var l3 = l3st[i];
      var l3N = l3st[i+1];
      var linepatharr = [l3[1],l3N[1]]; 

      addMarkerWithTimeout(l3[0], l3[1], l3[2], i * 100);
      addLine(linepatharr, l3[3], l3[4], l3[5]);
      };

      var l3 = l3st[i];
      addMarkerWithTimeout(l3[0], l3[1], l3[2], i * 100);
    }
}
/*Опускаем станции и рисуем линии на 4 линии*/
function dropl4st() {
    for (var i = 0; i < l4st.length; i++) {
      if (i != l4st.length-1){
      var l4 = l4st[i];
      var l4N = l4st[i+1];
      var linepatharr = [l4[1],l4N[1]]; 

      addMarkerWithTimeout(l4[0], l4[1], l4[2], i * 100);
      addLine(linepatharr, l4[3], l4[4], l4[5]);
      };

      var l4 = l4st[i];
      addMarkerWithTimeout(l4[0], l4[1], l4[2], i * 100);
    }
}
/*Опускаем станции и рисуем линии на 5 линии*/
function dropl5st() {
    for (var i = 0; i < l5st.length; i++) {
      if (i != l5st.length-1){
      var l5 = l5st[i];
      var l5N = l5st[i+1];
      var linepatharr = [l5[1],l5N[1]]; 

      addMarkerWithTimeout(l5[0], l5[1], l5[2], i * 100);
      addLine(linepatharr, l5[3], l5[4], l5[5]);
      };

      var l5 = l5st[i];
      addMarkerWithTimeout(l5[0], l5[1], l5[2], i * 100);
    }
}
/*Опускаем станции и рисуем линии на 6 линии*/
function dropl6st() {
    for (var i = 0; i < l6st.length; i++) {
      if (i != l6st.length-1){
      var l6 = l6st[i];
      var l6N = l6st[i+1];
      var linepatharr = [l6[1],l6N[1]]; 

      addMarkerWithTimeout(l6[0], l6[1], l6[2], i * 100);
      addLine(linepatharr, l6[3], l6[4], l6[5]);
      };

      var l6 = l6st[i];
      addMarkerWithTimeout(l6[0], l6[1], l6[2], i * 100);
    }
}

/*Прорисовка 3-й линии в стройке*/
function dropl3c(infowindow) {
  clearMarkers();
  removeLine();
    for (var i = 0; i < l3c.length; i++) {
      if (i != l3c.length-1){
      var l3 = l3c[i];
      var l3N = l3c[i+1];
      var linepatharr = [l3[1],l3N[1]]; 

      addMarkerWithTimeout(l3[0], l3[1], l3[2], l3[3], i * 100, infowindow);
      addLine(linepatharr, l3[4], l3[5], l3[6]);
      };

      var l3 = l3c[i];
      addMarkerWithTimeout(l3[0], l3[1], l3[2], l3[3], i * 100, infowindow);
    }
}

/*Добавление линии на карту*/
function addLine(linepatharr, linecolor, lineOp, lineW) {
  linePath = new google.maps.Polyline({
          path: linepatharr,
          strokeColor: linecolor,
          strokeOpacity: lineOp,
          strokeWeight: lineW,
          map: map
        });
//linePath.setMap(map);
polyLine.push(linePath);
}

  /*Функция определяющая значения маркера (определение одного маркера)*/
function addMarkerWithTimeout(title, position, text, img, timeout, infowindow) {
  window.setTimeout(function() {
    marker = new google.maps.Marker({
      position: position,
      title: title,
      icon: img,
      map: map,
      animation: google.maps.Animation.DROP
    });
    google.maps.event.addListener(marker, 'click', function(){
      infowindow.close;
      infowindow.setContent('<div class="content"><h2 class="content__header">'+title+'</h2>'+text+'</div>');
      infowindow.open(map, this);
    });
    markers.push(marker);
  }, timeout);
}


  /*Удаление всех маркеров с карты*/
function clearMarkers() {
  for (var i = 0; i < markers.length; i++) {
    markers[i].setMap(null);
  }
  markers = [];
}
/*Удалении нарисованных линий с карты*/
function removeLine() {
  for (var i = 0; i < polyLine.length; i++) {
    polyLine[i].setMap(null);
  }
  polyLine = [];
}

       </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDRTPdt0Qs9GVAsnrKy-pL0rjV1p8S5D0E&callback=initMap">
    </script>
  </body>
</html>